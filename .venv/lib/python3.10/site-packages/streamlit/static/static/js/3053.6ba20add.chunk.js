"use strict";(self.webpackChunk_streamlit_app=self.webpackChunk_streamlit_app||[]).push([[3053],{13053:function(e,t,r){r.r(t),r.d(t,{FileHandle:function(){return p},FolderHandle:function(){return d}});var n=r(60726),i=r(19113),a=r(649),s=r(11092),o=r(27791),u=r(22951),c=r(91976),f=r(38692),l=r(22265),w=r(69758).errors.DISALLOWED,h=function(){function e(t,r){(0,u.Z)(this,e),this.writer=t,this.fileEntry=r}return(0,c.Z)(e,[{key:"write",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==typeof t){e.next=26;break}if("write"!==t.type){e.next=13;break}if(!(Number.isInteger(t.position)&&t.position>=0)){e.next=8;break}if(this.writer.seek(t.position),this.writer.position===t.position){e.next=8;break}return e.next=7,new Promise((function(e,n){r.writer.onwriteend=e,r.writer.onerror=n,r.writer.truncate(t.position)}));case 7:this.writer.seek(t.position);case 8:if("data"in t){e.next=10;break}throw new DOMException("Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. write requires a data argument","SyntaxError");case 10:t=t.data,e.next=26;break;case 13:if("seek"!==t.type){e.next=24;break}if(!(Number.isInteger(t.position)&&t.position>=0)){e.next=21;break}if(this.writer.seek(t.position),this.writer.position===t.position){e.next=18;break}throw new DOMException("seeking position failed","InvalidStateError");case 18:return e.abrupt("return");case 21:throw new DOMException("Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. seek requires a position argument","SyntaxError");case 22:e.next=26;break;case 24:if("truncate"!==t.type){e.next=26;break}return e.abrupt("return",new Promise((function(e){if(!(Number.isInteger(t.size)&&t.size>=0))throw new DOMException("Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. truncate requires a size argument","SyntaxError");r.writer.onwriteend=function(t){return e()},r.writer.truncate(t.size)})));case 26:return e.next=28,new Promise((function(e,n){r.writer.onwriteend=e,r.writer.onerror=n,r.writer.write(new Blob([t]))}));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){return new Promise(this.fileEntry.file.bind(this.fileEntry))}}]),e}(),p=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,u.Z)(this,e),this.file=t,this.kind="file",this.writable=r,this.readable=!0}return(0,c.Z)(e,[{key:"name",get:function(){return this.file.name}},{key:"isSameEntry",value:function(e){return this.file.toURL()===e.file.toURL()}},{key:"getFile",value:function(){return new Promise(this.file.file.bind(this.file))}},{key:"createWritable",value:function(e){var t=this;if(!this.writable)throw(0,i.Z)(DOMException,(0,a.Z)(w));return new Promise((function(r,n){return t.file.createWriter((function(n){!1===e.keepExistingData?(n.onwriteend=function(e){return r(new h(n,t.file))},n.truncate(0)):r(new h(n,t.file))}),n)}))}}]),e}(),d=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,u.Z)(this,e),this.dir=t,this.writable=r,this.readable=!0,this.kind="directory",this.name=t.name}return(0,c.Z)(e,[{key:"isSameEntry",value:function(e){return this.dir.fullPath===e.dir.fullPath}},{key:"entries",value:function(){var t=this;return(0,l.Z)((0,s.Z)().mark((function r(){var i,a,o,u,c;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=t.dir.createReader(),r.next=3,(0,f.Z)(new Promise(i.readEntries.bind(i)));case 3:a=r.sent,o=(0,n.Z)(a),r.prev=5,o.s();case 7:if((u=o.n()).done){r.next=13;break}return c=u.value,r.next=11,[c.name,c.isFile?new p(c,t.writable):new e(c,t.writable)];case 11:r.next=7;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),o.e(r.t0);case 18:return r.prev=18,o.f(),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[5,15,18,21]])})))()}},{key:"getDirectoryHandle",value:function(t,r){var n=this;return new Promise((function(i,a){n.dir.getDirectory(t,r,(function(t){i(new e(t))}),a)}))}},{key:"getFileHandle",value:function(e,t){var r=this;return new Promise((function(n,i){return r.dir.getFile(e,t,(function(e){return n(new p(e))}),i)}))}},{key:"removeEntry",value:function(){var t=(0,o.Z)((0,s.Z)().mark((function t(r,n){var i,a=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDirectoryHandle(r,{create:!1}).catch((function(e){return"TypeMismatchError"===e.name?a.getFileHandle(r,{create:!1}):e}));case 2:if(!((i=t.sent)instanceof Error)){t.next=5;break}throw i;case 5:return t.abrupt("return",new Promise((function(t,r){i instanceof e?n.recursive?i.dir.removeRecursively((function(){return t()}),r):i.dir.remove((function(){return t()}),r):i.file&&i.file.remove((function(){return t()}),r)})));case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),e}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,r){return window.webkitRequestFileSystem(e._persistent,0,(function(e){return t(new d(e.root))}),r)}))}}}]);